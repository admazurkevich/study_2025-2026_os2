---
## Front matter
title: "Отчёт по лабораторной работе №10"
subtitle: "Основы работы с модулями ядра операционной системы"
author: "Анастасия Мазуркевич"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки работы с утилитами управления модулями ядра операционной системы.

# Ход выполнения

## Управление модулями ядра из командной строки

После входа в систему были получены права администратора с помощью команды `su`.  
Для анализа подключённых устройств использовалась команда `lspci -k`, которая вывела список оборудования и соответствующих драйверов ядра.  
В системе обнаружены устройства виртуальной среды VirtualBox, в том числе сетевой адаптер Intel PRO/1000, аудиоконтроллер Intel AC’97 и контроллер USB. Для каждого устройства указаны используемые модули ядра.

![Вывод команды lspci -k](Screenshot_1.png){ #fig:001 width=70% }

Далее была выполнена команда `lsmod | sort`, отобразившая список загруженных модулей ядра.  
Среди них присутствуют сетевые (`e1000`), файловые (`libata`, `ahci`), звуковые (`snd_intel8x0`), а также модули виртуализации (`vboxguest`, `vmwgfx`).

![Список загруженных модулей ядра](Screenshot_2.png){ #fig:002 width=70% }

Проверка наличия модуля `ext4` показала, что он отсутствует в списке. После загрузки с помощью `modprobe ext4` модуль появился в списке активных, что подтверждает успешное подключение.

![Загрузка и проверка модуля ext4](Screenshot_3.png){ #fig:003 width=70% }

Для изучения свойств использована команда `modinfo ext4`, отобразившая подробные сведения: версию, лицензию (GPL), авторов, зависимости и путь к файлу `/lib/modules/.../ext4.ko.xz`.  
Данный модуль реализует поддержку файловой системы ext4, не имеет пользовательских параметров и зависит от модулей `mbcache` и `jbd2`.

Попытка выгрузить модуль командой `modprobe -r ext4` завершилась без ошибок, однако повторный вызов показал отсутствие активных зависимостей. При удалении модуля `xfs` система выдала сообщение об ошибке — модуль используется, и выгрузка невозможна.

![Попытка удаления модулей ext4 и xfs](Screenshot_4.png){ #fig:004 width=70% }

## Загрузка модулей ядра с параметрами

Для проверки работы модуля Bluetooth использовались команды `lsmod | grep bluetooth` и `modprobe bluetooth`. После загрузки модуль появился в списке активных.

![Загрузка модуля bluetooth](Screenshot_5.png){ #fig:005 width=70% }

Команда `modinfo bluetooth` показала подробную информацию о версии (2.22), лицензии GPL, авторе и зависимости от модуля `rfkill`.  
В конце вывода указаны доступные параметры:  
- `disable_esco` — отключение режима eSCO;  
- `disable_ertm` — отключение режима enhanced retransmission;  
- `enable_ecred` — включение enhanced credit flow control mode.

Модуль был выгружен командой `modprobe -r bluetooth`.

![Информация о модуле bluetooth и его параметры](Screenshot_6.png){ #fig:006 width=70% }

## Обновление ядра системы

Сначала была проверена версия активного ядра — **6.12.0-55.12.1.el10_0.x86_64**.  
Затем с помощью `dnf list kernel` выявлено наличие более новой версии **6.12.0-55.37.1.el10_0**.

![Проверка текущего ядра и списка доступных пакетов](Screenshot_7.png){ #fig:007 width=70% }

Выполнены команды `dnf upgrade --refresh`, `dnf update kernel`, `dnf update`.  
Все обновления прошли успешно, в систему установлено новое ядро.

![Обновление ядра и системы](Screenshot_8.png){ #fig:008 width=70% }

После перезагрузки системы и выбора нового ядра команда `uname -r` подтвердила использование версии **6.12.0-55.37.1.el10_0.x86_64**.  
Команда `hostnamectl` показала общую информацию о системе Rocky Linux 10, виртуализации VirtualBox и версии прошивки.

![Проверка после обновления ядра](Screenshot_9.png){ #fig:009 width=70% }

# Контрольные вопросы

**1. Какая команда показывает текущую версию ядра, которая используется на вашей системе?**  
Для отображения версии активного ядра используется команда `uname -r`.  
Она выводит номер версии и архитектуру, например: `6.12.0-55.37.1.el10_0.x86_64`.

**2. Как можно посмотреть более подробную информацию о текущей версии ядра операционной системы?**  
Подробные сведения предоставляет команда `hostnamectl`.  
Она показывает версию ядра, дистрибутив, архитектуру и параметры виртуализации.  
Также можно использовать `uname -a` для вывода полной информации о ядре и системе.

**3. Какая команда показывает список загруженных модулей ядра?**  
Список всех загруженных модулей выводится командой `lsmod`.  
Для удобства вывода можно применить сортировку: `lsmod | sort`.

**4. Какая команда позволяет вам определять параметры модуля ядра?**  
Команда `modinfo <имя_модуля>` показывает сведения о модуле, включая доступные параметры, версию, авторов и зависимости.

**5. Как выгрузить модуль ядра?**  
Для удаления модуля из памяти используется команда `modprobe -r <имя_модуля>`.  
Её можно выполнить только с правами суперпользователя.

**6. Что вы можете сделать, если получите сообщение об ошибке при попытке выгрузить модуль ядра?**  
Если модуль используется системой, выгрузка невозможна.  
Следует остановить процессы, использующие модуль, либо отключить связанные службы.  
После этого повторить команду `modprobe -r`.

**7. Как определить, какие параметры модуля ядра поддерживаются?**  
Поддерживаемые параметры указаны в выводе команды `modinfo <имя_модуля>` в секции `parm`.  
Например, для `bluetooth` доступны параметры `disable_esco`, `disable_ertm` и `enable_ecred`.

**8. Как установить новую версию ядра?**  
Для обновления ядра используется пакетный менеджер DNF.  
Последовательность действий:  
- проверить доступные версии: `dnf list kernel`;  
- обновить пакеты: `dnf upgrade --refresh`;  
- установить новое ядро: `dnf update kernel`;  
- перезагрузить систему и выбрать новое ядро при загрузке.

# Заключение

В ходе лабораторной работы были изучены основные приёмы управления модулями ядра операционной системы Linux.  
Были рассмотрены команды для просмотра загруженных модулей, их параметров, а также способы загрузки и выгрузки модулей из памяти.  
Был выполнен процесс обновления ядра системы Rocky Linux, что позволило закрепить навыки администрирования и сопровождения операционной системы на уровне ядра.  
